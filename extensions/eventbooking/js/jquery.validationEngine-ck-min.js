/*
 * Inline Form Validation Engine 2.6.2, jQuery plugin
 *
 * Copyright(c) 2010, Cedric Dugas
 * http://www.position-absolute.com
 *
 * 2.0 Rewrite by Olivier Refalo
 * http://www.crionics.com
 *
 * Form validation engine allowing custom regex rules to be added.
 * Licensed under the MIT License
 */!function(F){"use strict";var k={init:function(e){var a=this;return a.data("jqv")&&null!=a.data("jqv")||(e=k._saveOptions(a,e),F(document).on("click",".formError",function(){F(this).fadeOut(150,function(){F(this).parent(".formErrorOuter").remove(),F(this).remove()})})),this},attach:function(e){var a=this,t;return(t=e?k._saveOptions(a,e):a.data("jqv")).validateAttribute=a.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",t.binded&&(a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",k._onFieldEvent),a.on("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",k._onFieldEvent),a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",{delay:300},k._onFieldEvent)),t.autoPositionUpdate&&F(window).bind("resize",{noAnimation:!0,formElem:a},k.updatePromptsPosition),a.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",k._submitButtonClick),a.removeData("jqv_submitButton"),a.on("submit",k._onSubmitEvent),this},detach:function(){var e=this,a=e.data("jqv");return e.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").off(a.validationEventTrigger,k._onFieldEvent),e.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",k._onFieldEvent),e.off("submit",k._onSubmitEvent),e.removeData("jqv"),e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",k._submitButtonClick),e.removeData("jqv_submitButton"),a.autoPositionUpdate&&F(window).off("resize",k.updatePromptsPosition),this},validate:function(){var e=F(this),a=null;if(e.is("form")||e.hasClass("validationEngineContainer")){if(e.hasClass("validating"))return!1;e.addClass("validating");var t=e.data("jqv"),a=k._validateFields(this);setTimeout(function(){e.removeClass("validating")},100),a&&t.onSuccess?t.onSuccess():!a&&t.onFailure&&t.onFailure()}else if(e.is("form")||e.hasClass("validationEngineContainer"))e.removeClass("validating");else{var r=e.closest("form, .validationEngineContainer"),t=r.data("jqv")?r.data("jqv"):F.validationEngine.defaults,a;(a=k._validateField(e,t))&&t.onFieldSuccess?t.onFieldSuccess():t.onFieldFailure&&0<t.InvalidFields.length&&t.onFieldFailure()}return t.onValidationComplete?!!t.onValidationComplete(r,a):a},updatePromptsPosition:function(e){if(e&&this==window)var r=e.data.formElem,i=e.data.noAnimation;else var r=F(this.closest("form, .validationEngineContainer"));var o=r.data("jqv");return r.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=F(this);o.prettySelect&&e.is(":hidden")&&(e=r.find("#"+o.usePrefix+e.attr("id")+o.useSuffix));var a=k._getPrompt(e),t=F(a).find(".formErrorContent").html();a&&k._updatePrompt(e,F(a),t,void 0,!1,o,i)}),this},showPrompt:function(e,a,t,r){var i,o=this.closest("form, .validationEngineContainer").data("jqv");return o||(o=k._saveOptions(this,o)),t&&(o.promptPosition=t),o.showArrow=1==r,k._showPrompt(this,e,a,!1,o),this},hide:function(){var e,a=F(this).closest("form, .validationEngineContainer").data("jqv"),t=a&&a.fadeDuration?a.fadeDuration:.3,r;return r=F(this).is("form")||F(this).hasClass("validationEngineContainer")?"parentForm"+k._getClassName(F(this).attr("id")):k._getClassName(F(this).attr("id"))+"formError",F("."+r).fadeTo(t,.3,function(){F(this).parent(".formErrorOuter").remove(),F(this).remove()}),this},hideAll:function(){var e,a=this.data("jqv"),t=a?a.fadeDuration:300;return F(".formError").fadeTo(t,300,function(){F(this).parent(".formErrorOuter").remove(),F(this).remove()}),this},_onFieldEvent:function(e){var a=F(this),t,r=a.closest("form, .validationEngineContainer").data("jqv");r.eventTrigger="field",window.setTimeout(function(){k._validateField(a,r),0==r.InvalidFields.length&&r.onFieldSuccess?r.onFieldSuccess():0<r.InvalidFields.length&&r.onFieldFailure&&r.onFieldFailure()},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=F(this),a=e.data("jqv");if(e.data("jqv_submitButton")){var t=F("#"+e.data("jqv_submitButton"));if(t&&0<t.length&&(t.hasClass("validate-skip")||"true"==t.attr("data-validation-engine-skip")))return!0}a.eventTrigger="submit";var r=k._validateFields(e);return r&&a.ajaxFormValidation?(k._validateFormWithAjax(e,a),!1):a.onValidationComplete?!!a.onValidationComplete(e,r):r},_checkAjaxStatus:function(e){var t=!0;return F.each(e.ajaxValidCache,function(e,a){if(!a)return t=!1}),t},_checkAjaxFieldStatus:function(e,a){return 1==a.ajaxValidCache[e]},_validateFields:function(t){var r=t.data("jqv"),i=!1;t.trigger("jqv.form.validating");var o=null;if(t.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=F(this),a=[];if(F.inArray(e.attr("name"),a)<0){if((i|=k._validateField(e,r))&&null==o&&(o=e.is(":hidden")&&r.prettySelect?e=t.find("#"+r.usePrefix+k._jqSelector(e.attr("id"))+r.useSuffix):(e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=F(e.data("jqv-prompt-at"))),e)),r.doNotShowAllErrosOnSubmit)return!1;if(a.push(e.attr("name")),1==r.showOneMessage&&i)return!1}}),t.trigger("jqv.form.result",[i]),i){if(r.scroll){var e=o.offset().top,a=o.offset().left,s=r.promptPosition;if("string"==typeof s&&-1!=s.indexOf(":")&&(s=s.substring(0,s.indexOf(":"))),"bottomRight"!=s&&"bottomLeft"!=s){var n=k._getPrompt(o);n&&(e=n.offset().top)}if(r.scrollOffset&&(e-=r.scrollOffset),r.isOverflown){var l=F(r.overflownDIV),d,u,c;if(!l.length)return!1;e+=l.scrollTop()+-parseInt(l.offset().top)-5,F(r.overflownDIV+":not(:animated)").animate({scrollTop:e},1100,function(){r.focusFirstField&&o.focus()})}else F("html, body").animate({scrollTop:e},1100,function(){r.focusFirstField&&o.focus()}),F("html, body").animate({scrollLeft:a},1100)}else r.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(l,d){var e=l.serialize(),a=d.ajaxFormValidationMethod?d.ajaxFormValidationMethod:"GET",t=d.ajaxFormValidationURL?d.ajaxFormValidationURL:l.attr("action"),u=d.dataType?d.dataType:"json";F.ajax({type:a,url:t,cache:!1,dataType:u,data:e,form:l,methods:k,options:d,beforeSend:function(){return d.onBeforeAjaxFormValidation(l,d)},error:function(e,a){k._ajaxError(e,a)},success:function(e){if("json"==u&&!0!==e){for(var a=!1,t=0;t<e.length;t++){var r=e[t],i=r[0],o=F(F("#"+i)[0]);if(1==o.length){var s=r[2];if(1==r[1])if(""!=s&&s){var n;if(d.allrules[s])(n=d.allrules[s].alertTextOk)&&(s=n);d.showPrompts&&k._showPrompt(o,s,"pass",!1,d,!0)}else k._closePrompt(o);else{var n;if(a|=!0,d.allrules[s])(n=d.allrules[s].alertText)&&(s=n);d.showPrompts&&k._showPrompt(o,s,"",!1,d,!0)}}}d.onAjaxFormComplete(!a,l,e,d)}else d.onAjaxFormComplete(!0,l,e,d)}})},_validateField:function(e,a,t){if(e.attr("id")||(e.attr("id","form-validation-field-"+F.validationEngine.fieldIdCounter),++F.validationEngine.fieldIdCounter),!a.validateNonVisibleFields&&(e.is(":hidden")&&!a.prettySelect||e.parent().is(":hidden")))return!1;var r=e.attr(a.validateAttribute),i=/validate\[(.*)\]/.exec(r);if(!i)return!1;var o,s=i[1].split(/\[|,|\]/),n=!1,l=e.attr("name"),d="",u="",c=!1,f=!1;a.isError=!1,a.showArrow=!0,0<a.maxErrorsPerField&&(f=!0);for(var v=F(e.closest("form, .validationEngineContainer")),p=0;p<s.length;p++)s[p]=s[p].replace(" ",""),""===s[p]&&delete s[p];for(var p=0,m=0;p<s.length;p++){if(f&&m>=a.maxErrorsPerField){if(!c){var g=F.inArray("required",s);c=-1!=g&&p<=g}break}var h=void 0;switch(s[p]){case"required":c=!0,h=k._getErrorMessage(v,e,s[p],s,p,a,k._required);break;case"custom":h=k._getErrorMessage(v,e,s[p],s,p,a,k._custom);break;case"groupRequired":var x="["+a.validateAttribute+"*="+s[p+1]+"]",_=v.find(x).eq(0);_[0]!=e[0]&&(k._validateField(_,a,t),a.showArrow=!0),(h=k._getErrorMessage(v,e,s[p],s,p,a,k._groupRequired))&&(c=!0),a.showArrow=!1;break;case"ajax":(h=k._ajax(e,s,p,a))&&(u="load");break;case"minSize":h=k._getErrorMessage(v,e,s[p],s,p,a,k._minSize);break;case"maxSize":h=k._getErrorMessage(v,e,s[p],s,p,a,k._maxSize);break;case"min":h=k._getErrorMessage(v,e,s[p],s,p,a,k._min);break;case"max":h=k._getErrorMessage(v,e,s[p],s,p,a,k._max);break;case"past":h=k._getErrorMessage(v,e,s[p],s,p,a,k._past);break;case"future":h=k._getErrorMessage(v,e,s[p],s,p,a,k._future);break;case"dateRange":var x="["+a.validateAttribute+"*="+s[p+1]+"]";a.firstOfGroup=v.find(x).eq(0),a.secondOfGroup=v.find(x).eq(1),(a.firstOfGroup[0].value||a.secondOfGroup[0].value)&&(h=k._getErrorMessage(v,e,s[p],s,p,a,k._dateRange)),h&&(c=!0),a.showArrow=!1;break;case"dateTimeRange":var x="["+a.validateAttribute+"*="+s[p+1]+"]";a.firstOfGroup=v.find(x).eq(0),a.secondOfGroup=v.find(x).eq(1),(a.firstOfGroup[0].value||a.secondOfGroup[0].value)&&(h=k._getErrorMessage(v,e,s[p],s,p,a,k._dateTimeRange)),h&&(c=!0),a.showArrow=!1;break;case"maxCheckbox":e=F(v.find("input[name='"+l+"']")),h=k._getErrorMessage(v,e,s[p],s,p,a,k._maxCheckbox);break;case"minCheckbox":e=F(v.find("input[name='"+l+"']")),h=k._getErrorMessage(v,e,s[p],s,p,a,k._minCheckbox);break;case"equals":h=k._getErrorMessage(v,e,s[p],s,p,a,k._equals);break;case"funcCall":h=k._getErrorMessage(v,e,s[p],s,p,a,k._funcCall);break;case"creditCard":h=k._getErrorMessage(v,e,s[p],s,p,a,k._creditCard);break;case"condRequired":void 0!==(h=k._getErrorMessage(v,e,s[p],s,p,a,k._condRequired))&&(c=!0);break;default:}var C=!1;if("object"==typeof h)switch(h.status){case"_break":C=!0;break;case"_error":h=h.message;break;case"_error_no_prompt":return!0;default:}if(C)break;"string"==typeof h&&(d+=h+"<br/>",a.isError=!0,m++)}!c&&!e.val()&&e.val().length<1&&(a.isError=!1);var b=e.prop("type"),E=e.data("promptPosition")||a.promptPosition;("radio"==b||"checkbox"==b)&&1<v.find("input[name='"+l+"']").size()&&(e=F("inline"===E?v.find("input[name='"+l+"'][type!=hidden]:last"):v.find("input[name='"+l+"'][type!=hidden]:first")),a.showArrow=!1),e.is(":hidden")&&a.prettySelect&&(e=v.find("#"+a.usePrefix+k._jqSelector(e.attr("id"))+a.useSuffix)),a.isError&&a.showPrompts?k._showPrompt(e,d,u,!1,a):k._closePrompt(e),e.trigger("jqv.field.result",[e,a.isError,d]);var T=F.inArray(e[0],a.InvalidFields);return-1==T?a.isError&&a.InvalidFields.push(e[0]):a.isError||a.InvalidFields.splice(T,1),k._handleStatusCssClasses(e,a),a.isError&&a.onFieldFailure&&a.onFieldFailure(e),!a.isError&&a.onFieldSuccess&&a.onFieldSuccess(e),a.isError},_handleStatusCssClasses:function(e,a){a.addSuccessCssClassToField&&e.removeClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&e.removeClass(a.addFailureCssClassToField),a.addSuccessCssClassToField&&!a.isError&&e.addClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&a.isError&&e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(e,a,t,r,i,o,s){var n=jQuery.inArray(t,r),l;"custom"!==t&&"funcCall"!==t||(t=t+"["+r[n+1]+"]",delete r[n]);var d=t,u,c=(a.attr("data-validation-engine")?a.attr("data-validation-engine"):a.attr("class")).split(" "),f;if(null!=(f="future"==t||"past"==t||"maxCheckbox"==t||"minCheckbox"==t?s(e,a,r,i,o):s(a,r,i,o))){var v=k._getCustomErrorMessage(F(a),c,d,o);v&&(f=v)}return f},_getCustomErrorMessage:function(e,a,t,r){var i=!1,o=/^custom\[.*\]$/.test(t)?k._validityProp.custom:k._validityProp[t];if(null!=o&&null!=(i=e.attr("data-errormessage-"+o)))return i;if(null!=(i=e.attr("data-errormessage")))return i;var s="#"+e.attr("id");if(void 0!==r.custom_error_messages[s]&&void 0!==r.custom_error_messages[s][t])i=r.custom_error_messages[s][t].message;else if(0<a.length)for(var n=0;n<a.length&&0<a.length;n++){var l="."+a[n];if(void 0!==r.custom_error_messages[l]&&void 0!==r.custom_error_messages[l][t]){i=r.custom_error_messages[l][t].message;break}}return!i&&void 0!==r.custom_error_messages[t]&&void 0!==r.custom_error_messages[t].message&&(i=r.custom_error_messages[t].message),i},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,a,t,r,i){switch(e.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var o=F.trim(e.val()),s=F.trim(e.attr("data-validation-placeholder")),n=F.trim(e.attr("placeholder"));if(!o||s&&o==s||n&&o==n)return r.allrules[a[t]].alertText;break;case"radio":case"checkbox":if(i){if(!e.attr("checked"))return r.allrules[a[t]].alertTextCheckboxMultiple;break}var l=e.closest("form, .validationEngineContainer"),d=e.attr("name");if(0==l.find("input[name='"+d+"']:checked").size())return 1==l.find("input[name='"+d+"']:visible").size()?r.allrules[a[t]].alertTextCheckboxe:r.allrules[a[t]].alertTextCheckboxMultiple}},_groupRequired:function(e,a,t,r){var i="["+r.validateAttribute+"*="+a[t+1]+"]",o=!1;if(e.closest("form, .validationEngineContainer").find(i).each(function(){if(!k._required(F(this),a,t,r))return!(o=!0)}),!o)return r.allrules[a[t]].alertText},_custom:function(e,a,t,r){var i=a[t+1],o=r.allrules[i],s;if(o)if(o.regex){var n=o.regex,l;if(!n)return void alert("jqv:custom regex not found - "+i);if(!new RegExp(n).test(e.val()))return r.allrules[i].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+i);if("function"!=typeof(s=o.func))return void alert("jqv:custom parameter 'function' is no function - "+i);if(!s(e,a,t,r))return r.allrules[i].alertText}else alert("jqv:custom rule not found - "+i)},_funcCall:function(e,a,t,r){var i=a[t+1],o;if(-1<i.indexOf(".")){for(var s=i.split("."),n=window;s.length;)n=n[s.shift()];o=n}else o=window[i]||r.customFunctions[i];if("function"==typeof o)return o(e,a,t,r)},_equals:function(e,a,t,r){var i=a[t+1];if(e.val()!=F("#"+i).val())return r.allrules.equals.alertText},_maxSize:function(e,a,t,r){var i=a[t+1],o;if(i<e.val().length){var s=r.allrules.maxSize;return s.alertText+i+s.alertText2}},_minSize:function(e,a,t,r){var i=a[t+1],o;if(e.val().length<i){var s=r.allrules.minSize;return s.alertText+i+s.alertText2}},_min:function(e,a,t,r){var i=parseFloat(a[t+1]),o;if(parseFloat(e.val())<i){var s=r.allrules.min;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_max:function(e,a,t,r){var i=parseFloat(a[t+1]),o;if(i<parseFloat(e.val())){var s=r.allrules.max;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_past:function(e,a,t,r,i){var o=t[r+1],s=F(e.find("input[name='"+o.replace(/^#+/,"")+"']")),n,l;if("now"==o.toLowerCase())n=new Date;else if(null!=s.val()){if(s.is(":disabled"))return;n=k._parseDate(s.val())}else n=k._parseDate(o);if(n<k._parseDate(a.val())){var d=i.allrules.past;return d.alertText2?d.alertText+k._dateToString(n)+d.alertText2:d.alertText+k._dateToString(n)}},_future:function(e,a,t,r,i){var o=t[r+1],s=F(e.find("input[name='"+o.replace(/^#+/,"")+"']")),n,l;if("now"==o.toLowerCase())n=new Date;else if(null!=s.val()){if(s.is(":disabled"))return;n=k._parseDate(s.val())}else n=k._parseDate(o);if(k._parseDate(a.val())<n){var d=i.allrules.future;return d.alertText2?d.alertText+k._dateToString(n)+d.alertText2:d.alertText+k._dateToString(n)}},_isDate:function(e){var a;return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){var a;return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(e,a,t,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[a[t]].alertText+r.allrules[a[t]].alertText2:k._isDate(r.firstOfGroup[0].value)&&k._isDate(r.secondOfGroup[0].value)&&k._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[a[t]].alertText+r.allrules[a[t]].alertText2},_dateTimeRange:function(e,a,t,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[a[t]].alertText+r.allrules[a[t]].alertText2:k._isDateTime(r.firstOfGroup[0].value)&&k._isDateTime(r.secondOfGroup[0].value)&&k._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[a[t]].alertText+r.allrules[a[t]].alertText2},_maxCheckbox:function(e,a,t,r,i){var o=t[r+1],s=a.attr("name"),n;if(o<e.find("input[name='"+s+"']:checked").size())return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+o+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,a,t,r,i){var o=t[r+1],s=a.attr("name"),n;if(e.find("input[name='"+s+"']:checked").size()<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+o+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,a,t,r){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,""),s=o.length;if(14<=s&&s<=16&&0<parseInt(o)){for(var n=0,t=s-1,l=1,d,u=new String;d=parseInt(o.charAt(t)),u+=l++%2==0?2*d:d,0<=--t;);for(t=0;t<u.length;t++)n+=parseInt(u.charAt(t));i=n%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(s,e,a,n){var t=e[a+1],l=n.allrules[t],r=l.extraData,i=l.extraDataDynamic,o={fieldId:s.attr("id"),fieldValue:s.val()};if("object"==typeof r)F.extend(o,r);else if("string"==typeof r)for(var d=r.split("&"),a=0;a<d.length;a++){var u=d[a].split("=");u[0]&&u[0]&&(o[u[0]]=u[1])}if(i)for(var c=[],f=String(i).split(","),a=0;a<f.length;a++){var v=f[a];if(F(v).length){var p=s.closest("form, .validationEngineContainer").find(v).val(),m=v.replace("#","")+"="+escape(p);o[v.replace("#","")]=p}}if("field"==n.eventTrigger&&delete n.ajaxValidCache[s.attr("id")],!n.isError&&!k._checkAjaxFieldStatus(s.attr("id"),n))return F.ajax({type:n.ajaxFormValidationMethod,url:l.url,cache:!1,dataType:"json",data:o,field:s,rule:l,methods:k,options:n,beforeSend:function(){},error:function(e,a){k._ajaxError(e,a)},success:function(e){var a=e[0],t=F("#"+a).eq(0);if(1==t.length){var r=e[1],i=e[2];if(r){var o;if(n.ajaxValidCache[a]=!0,i){if(n.allrules[i])(o=n.allrules[i].alertTextOk)&&(i=o)}else i=l.alertTextOk;n.showPrompts&&(i?k._showPrompt(t,i,"pass",!0,n):k._closePrompt(t)),"submit"==n.eventTrigger&&s.closest("form").submit()}else{var o;if(n.ajaxValidCache[a]=!1,n.isError=!0,i){if(n.allrules[i])(o=n.allrules[i].alertText)&&(i=o)}else i=l.alertText;n.showPrompts&&k._showPrompt(t,i,"",!0,n)}}t.trigger("jqv.field.result",[t,n.isError,i])}}),l.alertTextLoad},_ajaxError:function(e,a){0==e.status&&null==a?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+a)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var a=e.split("-");return a==e&&(a=e.split("/")),a==e?(a=e.split("."),new Date(a[2],a[1]-1,a[0])):new Date(a[0],a[1]-1,a[2])},_showPrompt:function(e,a,t,r,i,o){e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=F(e.data("jqv-prompt-at")));var s=k._getPrompt(e);o&&(s=!1),F.trim(a)&&(s?k._updatePrompt(e,s,a,t,r,i):k._buildPrompt(e,a,t,r,i))},_buildPrompt:function(e,a,t,r,i){var o=F("<div>");switch(o.addClass(k._getClassName(e.attr("id"))+"formError"),o.addClass("parentForm"+k._getClassName(e.closest("form, .validationEngineContainer").attr("id"))),o.addClass("formError"),t){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup");break;default:}r&&o.addClass("ajaxed");var s=F("<div>").addClass("formErrorContent").html(a).appendTo(o),n=e.data("promptPosition")||i.promptPosition;if(i.showArrow){var l=F("<div>").addClass("formErrorArrow"),d;if("string"==typeof n)-1!=(d=n.indexOf(":"))&&(n=n.substring(0,d));switch(n){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(l),l.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":l.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),o.append(l)}}i.addPromptClass&&o.addClass(i.addPromptClass);var u=e.attr("data-required-class");if(void 0!==u)o.addClass(u);else if(i.prettySelect&&F("#"+e.attr("id")).next().is("select")){var c=F("#"+e.attr("id").substr(i.usePrefix.length).substring(i.useSuffix.length)).attr("data-required-class");void 0!==c&&o.addClass(c)}o.css({opacity:0}),"inline"===n?(o.addClass("inline"),void 0!==e.attr("data-prompt-target")&&0<F("#"+e.attr("data-prompt-target")).length?o.appendTo(F("#"+e.attr("data-prompt-target"))):e.after(o)):e.before(o);var d=k._calculatePosition(e,o,i);return o.css({position:"inline"===n?"relative":"absolute",top:d.callerTopPosition,left:d.callerleftPosition,marginTop:d.marginTopSize,opacity:0}).data("callerField",e),i.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove(),o.remove()})},i.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(e,a,t,r,i,o,s){if(a){void 0!==r&&("pass"==r?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==r?a.addClass("blackPopup"):a.removeClass("blackPopup")),i?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(t);var n=k._calculatePosition(e,a,o),l={top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize};s?a.css(l):a.animate(l)}},_closePrompt:function(e){var a=k._getPrompt(e);a&&a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove(),a.remove()})},closePrompt:function(e){return k._closePrompt(e)},_getPrompt:function(e){var a=F(e).closest("form, .validationEngineContainer").attr("id"),t=k._getClassName(e.attr("id"))+"formError",r=F("."+k._escapeExpression(t)+".parentForm"+k._getClassName(a))[0];if(r)return F(r)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var a=F(document),t=F("body"),r=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase();return Boolean(r)},_calculatePosition:function(e,a,t){var r,i,o,s=e.width(),n=e.position().left,l=e.position().top,d=e.height(),u;r=i=0,o=-a.height();var c=e.data("promptPosition")||t.promptPosition,f="",v="",p=0,m=0;switch("string"==typeof c&&-1!=c.indexOf(":")&&(f=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=f.indexOf(",")&&(v=f.substring(f.indexOf(",")+1),f=f.substring(0,f.indexOf(",")),m=parseInt(v),isNaN(m)&&(m=0)),p=parseInt(f),isNaN(f)&&(f=0)),c){default:case"topRight":i+=n+s-30,r+=l;break;case"topLeft":r+=l,i+=n;break;case"centerRight":r=l+4,o=0,i=n+e.outerWidth(!0)+5;break;case"centerLeft":i=n-(a.width()+2),r=l+4,o=0;break;case"bottomLeft":r=l+e.height()+5,o=0,i=n;break;case"bottomRight":i=n+s-30,r=l+e.height()+5,o=0;break;case"inline":o=r=i=0}return{callerTopPosition:(r+=m)+"px",callerleftPosition:(i+=p)+"px",marginTopSize:o+"px"}},_saveOptions:function(e,a){if(F.validationEngineLanguage)var t=F.validationEngineLanguage.allRules;else F.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");F.validationEngine.defaults.allrules=t;var r=F.extend(!0,{},F.validationEngine.defaults,a);return e.data("jqv",r),r},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,a,t,r){var i,o;for(i=t+1;i<a.length;i++)if((o=jQuery("#"+a[i]).first()).length&&null==k._required(o,["required"],0,r,!0))return k._required(e,["required"],0,r)},_submitButtonClick:function(e){var a=F(this),t;a.closest("form, .validationEngineContainer").data("jqv_submitButton",a.attr("id"))}};F.fn.validationEngine=function(e){var a=F(this);return a[0]?"string"==typeof e&&"_"!=e.charAt(0)&&k[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&k.init.apply(a),k[e].apply(a,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void F.error("Method "+e+" does not exist in jQuery.validationEngine"):(k.init.apply(a,arguments),k.attach.apply(a)):a},F.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:F.noop,onBeforeAjaxFormValidation:F.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},F(function(){F.validationEngine.defaults.promptPosition=k.isRTL()?"topLeft":"topRight"})}(jQuery);